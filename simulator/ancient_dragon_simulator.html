<!DOCTYPE html>
<!--
  Material Design Lite
  Copyright 2015 Google Inc. All rights reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      https://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License
-->

<html lang="ja">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=960">
    <!-- Page styles -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.min.css" />
    <link rel="stylesheet" href="../styles.css" />
    <link rel="icon" href="../design/RedStoneLogo.png" sizes="32x32" />
    <link rel="icon" href="../design/RedStoneLogo.png" sizes="192x192" />
    <link rel="apple-touch-icon-precomposed" href="../design/RedStoneLogo.png" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-133658114-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-133658114-1');
    </script>
    <script type="text/javascript" src="../design/jquery-3.4.1.min.js"></script>
    <script>
        function enter() {
            if (window.event.keyCode == 13) {
                var last_keyword = $('#search-field').val();
                window.location.href = "https://www.google.com/search?hl=ja&hq=inurl:sokomin.github.io&ie=UTF-8&oe=UTF-8&filter=0&q=" + last_keyword;
            }
        }
    </script>
    <script data-ad-client="ca-pub-2122309953813422" async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <style>
        #view-source {
            position: fixed;
            display: block;
            right: 0;
            bottom: 0;
            margin-right: 40px;
            margin-bottom: 40px;
            z-index: 900;
        }
    </style>
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            margin: 20px;
            line-height: 1.6;
        }

        h1,
        h2,
        h3 {
            margin-top: 0.4em;
            margin-bottom: 0.4em;
        }

        .section {
            margin-bottom: 2em;
            padding: 1em;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        label {
            font-weight: 600;
        }

        input[type="number"] {
            font-family: inherit;
            padding: 4px 6px;
            margin: 2px 0;
        }

        button {
            padding: 6px 14px;
            border-radius: 6px;
            border: 1px solid #ccc;
            cursor: pointer;
        }

        button:hover {
            background: #f3f3f3;
        }

        .row {
            margin-bottom: 0.5em;
        }

        .result-box {
            background: #f9f9ff;
            border-left: 4px solid #5566cc;
            padding: 0.6em 0.8em;
            margin-top: 0.6em;
            white-space: pre-wrap;
        }

        .error {
            color: #c00;
            font-weight: 600;
        }

        .small {
            font-size: 0.9em;
            color: #555;
        }

        code {
            background: #f5f5f5;
            padding: 2px 4px;
            border-radius: 4px;
        }
    </style>
    <script>var rswitch = true;</script>
    <!-- <script type="text/javascript" src="./js2023/phase_stone.js"></script> -->
    <!-- 忘れずに変えてね -->
</head>

<body>
    <title>古龍の祝福 シミュレータ 赤石の民衆</title>
    <meta name="description" content="レッドストーン総合攻略情報ポータルページ" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta http-equiv="Content-Script-Type" content="text/javascript" />
    <meta name="keywords" content="RED STONE ,レッドストーン,赤石の民衆,そこらの民衆,ＲＥＤ ＳＴＯＮＥ,レッドストーン,そこみん,赤石,攻略情報" />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml" />

    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <a name="container"></a>
        <div class="android-header mdl-layout__header mdl-layout__header--waterfall">
            <div class="mdl-layout__header-row">
                <span class="android-title mdl-layout-title">
                    <a href="https://sokomin.github.io/index.html">
                        <img class="android-logo-image" src="../design/logo3.png" />
                    </a>
                </span>
                <!-- Add spacer, to align navigation to the right in desktop -->
                <div class="android-header-spacer mdl-layout-spacer"></div>
                <div
                    class="android-search-box mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right mdl-textfield--full-width">
                    <label class="mdl-button mdl-js-button mdl-button--icon" for="search-field">
                        <i class="material-icons">search</i>
                    </label>
                    <div class="mdl-textfield__expandable-holder">
                        <input placeholder="サイト内検索(Enterで実行)" class="mdl-textfield__input" type="text"
                            onkeypress="enter();" id="search-field" />
                    </div>
                </div>
                <!-- Navigation -->
                <div class="android-navigation-container">
                    <nav class="android-navigation mdl-navigation">
                        <a class="mdl-navigation__link mdl-typography--text-uppercase"
                            href="https://sokomin.github.io/index.html">ホーム</a>
                        <a class="mdl-navigation__link mdl-typography--text-uppercase"
                            href="https://sokomin.github.io/calculator.html">計算機</a>
                        <a class="mdl-navigation__link mdl-typography--text-uppercase"
                            href="https://sokomin.github.io/history.html">赤石史</a>
                        <a class="mdl-navigation__link mdl-typography--text-uppercase"
                            href="https://sokomin.github.io/link.html">リンク</a>
                        <a class="mdl-navigation__link mdl-typography--text-uppercase"
                            href="https://marshmallow-qa.com/sokoranominnsyu">お問合せ</a>
                    </nav>
                </div>
                <span class="android-mobile-title mdl-layout-title">
                    <a href="https://sokomin.github.io/index.html">
                        <img class="android-logo-image" src="../design/logo3.png" />
                    </a>
                </span>
                <button class="android-more-button mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect"
                    id="more-button">
                    <i class="material-icons">more_vert</i>
                </button>
                <ul class="mdl-menu mdl-js-menu mdl-menu--bottom-right mdl-js-ripple-effect" for="more-button">
                    <li class="mdl-menu__item"><a class="mdl-navigation__link mdl-typography--text-uppercase"
                            href="https://sokomin.github.io/calculator.html">計算機</a></li>
                    <li class="mdl-menu__item"><a class="mdl-navigation__link mdl-typography--text-uppercase"
                            href="https://sokomin.github.io/history.html">赤石史</a></li>
                    <li disabled class="mdl-menu__item"><a class="mdl-navigation__link mdl-typography--text-uppercase"
                            href="https://sokomin.github.io/link.html">リンク</a></li>
                    <li class="mdl-menu__item"><a class="mdl-navigation__link mdl-typography--text-uppercase"
                            href="https://marshmallow-qa.com/sokoranominnsyu">お問合せ</a></li>
                </ul>

            </div>
        </div>

        <div class="android-drawer mdl-layout__drawer">
            <span class="mdl-layout-title">
                <h2>メニュー</h2>
            </span>
            <nav class="mdl-navigation">
                <a class="mdl-navigation__link sokomin-layout-item" href="../item/item.html"><strong>アイテム</strong></a>
                <a class="mdl-navigation__link sokomin-layout-skill" href="../skill/skill.html"><strong>スキル</strong></a>
                <a class="mdl-navigation__link sokomin-layout-pt"
                    href="../monster/monster.html"><strong>モンスター</strong></a>
                <a class="mdl-navigation__link sokomin-layout-pt"
                    href="../secret/secret.html"><strong>ダンジョン</strong></a>
                <a class="mdl-navigation__link sokomin-layout-quest"
                    href="../quest/quest.html"><strong>クエスト</strong></a>
                <a class="mdl-navigation__link sokomin-layout-guild" href="../guild/guild.html"><strong>ギルド</strong></a>
                <a class="mdl-navigation__link sokomin-layout-friend"
                    href="../korea/korea-update.html"><strong>韓国情報</strong></a>
                <a class="mdl-navigation__link sokomin-layout-info"
                    href="../information/information.html"><strong>雑学</strong></a>
            </nav>
        </div>

        <div class="android-large-table mdl-layout__content">

            <!--main-->
            <div class="main-background mdl-typography--text-center korea-content">
                <br>
                <h1>古龍の祝福 シミュレータ</h1>
                <br>
                <img src="https://image.space.rakuten.co.jp/d/strg/ctrl/9/c864bd6393a42291a2e7fdfa86ea87fd048ed723.10.9.9.3.png" width="600px" border=0 name="insertImg" /><br><br>                <br>
                <a href="#1">製錬シミュレータ</a><br>
                <br>
                <br>
                <h2>段階強化 期待値シミュレーター</h2>

                <!-- <div class="section">
                    <h2>使用しているテーブル</h2>
                    <p class="small">
                        ・段階数: 100 段階（1〜100）<br>
                        ・段階 i の成功確率: CSV の「段階上昇確率（%）」を 100 で割った値
                    </p>
                </div> -->
                <a name="1"></a>
                <div class="section">
                    <h2>（１）A段階から B 段階以上に強化する</h2>
                    <div class="row">
                        <label for="startA">スタート段階 A：</label>
                        <input type="number" id="startA" value="40" min="1" max="100">
                    </div>
                    <div class="row">
                        <label for="targetB">目標段階 B（以上）：</label>
                        <input type="number" id="targetB" value="60" min="1" max="100">
                    </div>
                    <button id="calcABBtn">（１）A→B 期待値を計算</button>

                    <div id="resultAB" class="result-box"></div>
                </div>

                <div class="section">
                    <h2>（２）初回入手から C 段階以上を得る</h2>
                    <p class="small">
                        初回入手段階は 1〜100 を等確率（各 1/100）とします。<br>
                        初回で既に C 段階以上を引いた場合、そのケースは<strong>強化 0 回</strong>として計算します。
                    </p>
                    <div class="row">
                        <label for="thresholdC">目標段階 C（以上）：</label>
                        <input type="number" id="thresholdC" value="70" min="1" max="100">
                    </div>
                    <button id="calcCBtn">（２）ランダム入手から C 以上 期待値を計算</button>

                    <div id="resultC" class="result-box"></div>
                </div>

                <div class="section">
                    <h2>3. 計算ロジック（概要）</h2>
                    <p class="small">
                        段階 i における「目標段階 T 以上になるまでの期待試行回数」を E<sub>i</sub> とします。<br>
                        ・i ≥ T のとき：既に目標達成なので E<sub>i</sub> = 0。<br>
                        ・i &lt; T のとき：成功確率を p<sub>i</sub> とすると
                    </p>
                    <pre class="small">
                    E<sub>i</sub> = 1 + (1 - p<sub>i</sub>) E<sub>i</sub> + p<sub>i</sub> × 平均{ E<sub>i+1</sub>, …, E<sub>N</sub> }
                    
                    ⇔  p<sub>i</sub> E<sub>i</sub> = 1 + p<sub>i</sub> × 平均
                    
                    ⇔  E<sub>i</sub> = 1 / p<sub>i</sub> + 平均{ E<sub>i+1</sub>, …, E<sub>N</sub> }
                      </pre>
                    <p class="small">
                        これを i = T-1, T-2, …, 1 の順に後ろから計算します。<br>
                        （２）の場合は、初回段階を一様ランダム 1〜N として、C 未満の段階の期待値を平均しています。
                </div>
                <div id="baseError" class="error"></div>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <h2>段階ごとの成功確率（%）</h2>
                <table id="table10" style="max-width:480px">
                    <!-- <table border="1" cellspacing="0" cellpadding="4" style="border-collapse: collapse; max-width: 360px;"> -->
                    <thead>
                        <tr style="background: #eef;">
                            <th>段階</th>
                            <th>成功確率 (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>97.05</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>94.1</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>91.2</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>88.4</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>85.65</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>82.95</td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>80.3</td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>77.7</td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td>75.15</td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td>72.65</td>
                        </tr>
                        <tr>
                            <td>11</td>
                            <td>70.2</td>
                        </tr>
                        <tr>
                            <td>12</td>
                            <td>67.8</td>
                        </tr>
                        <tr>
                            <td>13</td>
                            <td>65.45</td>
                        </tr>
                        <tr>
                            <td>14</td>
                            <td>63.15</td>
                        </tr>
                        <tr>
                            <td>15</td>
                            <td>60.9</td>
                        </tr>
                        <tr>
                            <td>16</td>
                            <td>58.7</td>
                        </tr>
                        <tr>
                            <td>17</td>
                            <td>56.55</td>
                        </tr>
                        <tr>
                            <td>18</td>
                            <td>54.45</td>
                        </tr>
                        <tr>
                            <td>19</td>
                            <td>52.4</td>
                        </tr>
                        <tr>
                            <td>20</td>
                            <td>50.4</td>
                        </tr>
                        <tr>
                            <td>21</td>
                            <td>48.45</td>
                        </tr>
                        <tr>
                            <td>22</td>
                            <td>46.55</td>
                        </tr>
                        <tr>
                            <td>23</td>
                            <td>44.7</td>
                        </tr>
                        <tr>
                            <td>24</td>
                            <td>42.9</td>
                        </tr>
                        <tr>
                            <td>25</td>
                            <td>41.15</td>
                        </tr>
                        <tr>
                            <td>26</td>
                            <td>39.45</td>
                        </tr>
                        <tr>
                            <td>27</td>
                            <td>37.8</td>
                        </tr>
                        <tr>
                            <td>28</td>
                            <td>36.2</td>
                        </tr>
                        <tr>
                            <td>29</td>
                            <td>34.65</td>
                        </tr>
                        <tr>
                            <td>30</td>
                            <td>33.15</td>
                        </tr>
                        <tr>
                            <td>31</td>
                            <td>31.7</td>
                        </tr>
                        <tr>
                            <td>32</td>
                            <td>30.3</td>
                        </tr>
                        <tr>
                            <td>33</td>
                            <td>28.95</td>
                        </tr>
                        <tr>
                            <td>34</td>
                            <td>27.65</td>
                        </tr>
                        <tr>
                            <td>35</td>
                            <td>26.4</td>
                        </tr>
                        <tr>
                            <td>36</td>
                            <td>25.2</td>
                        </tr>
                        <tr>
                            <td>37</td>
                            <td>24.05</td>
                        </tr>
                        <tr>
                            <td>38</td>
                            <td>22.95</td>
                        </tr>
                        <tr>
                            <td>39</td>
                            <td>21.9</td>
                        </tr>
                        <tr>
                            <td>40</td>
                            <td>20.9</td>
                        </tr>
                        <tr>
                            <td>41</td>
                            <td>19.95</td>
                        </tr>
                        <tr>
                            <td>42</td>
                            <td>19.05</td>
                        </tr>
                        <tr>
                            <td>43</td>
                            <td>18.2</td>
                        </tr>
                        <tr>
                            <td>44</td>
                            <td>17.4</td>
                        </tr>
                        <tr>
                            <td>45</td>
                            <td>16.65</td>
                        </tr>
                        <tr>
                            <td>46</td>
                            <td>15.95</td>
                        </tr>
                        <tr>
                            <td>47</td>
                            <td>15.3</td>
                        </tr>
                        <tr>
                            <td>48</td>
                            <td>14.7</td>
                        </tr>
                        <tr>
                            <td>49</td>
                            <td>14.15</td>
                        </tr>
                        <tr>
                            <td>50</td>
                            <td>13.65</td>
                        </tr>
                        <tr>
                            <td>51</td>
                            <td>13.15</td>
                        </tr>
                        <tr>
                            <td>52</td>
                            <td>12.65</td>
                        </tr>
                        <tr>
                            <td>53</td>
                            <td>12.15</td>
                        </tr>
                        <tr>
                            <td>54</td>
                            <td>11.65</td>
                        </tr>
                        <tr>
                            <td>55</td>
                            <td>11.15</td>
                        </tr>
                        <tr>
                            <td>56</td>
                            <td>10.66</td>
                        </tr>
                        <tr>
                            <td>57</td>
                            <td>10.18</td>
                        </tr>
                        <tr>
                            <td>58</td>
                            <td>9.71</td>
                        </tr>
                        <tr>
                            <td>59</td>
                            <td>9.25</td>
                        </tr>
                        <tr>
                            <td>60</td>
                            <td>8.8</td>
                        </tr>
                        <tr>
                            <td>61</td>
                            <td>8.36</td>
                        </tr>
                        <tr>
                            <td>62</td>
                            <td>7.93</td>
                        </tr>
                        <tr>
                            <td>63</td>
                            <td>7.51</td>
                        </tr>
                        <tr>
                            <td>64</td>
                            <td>7.1</td>
                        </tr>
                        <tr>
                            <td>65</td>
                            <td>6.7</td>
                        </tr>
                        <tr>
                            <td>66</td>
                            <td>6.31</td>
                        </tr>
                        <tr>
                            <td>67</td>
                            <td>5.93</td>
                        </tr>
                        <tr>
                            <td>68</td>
                            <td>5.56</td>
                        </tr>
                        <tr>
                            <td>69</td>
                            <td>5.2</td>
                        </tr>
                        <tr>
                            <td>70</td>
                            <td>4.85</td>
                        </tr>
                        <tr>
                            <td>71</td>
                            <td>4.55</td>
                        </tr>
                        <tr>
                            <td>72</td>
                            <td>4.26</td>
                        </tr>
                        <tr>
                            <td>73</td>
                            <td>3.98</td>
                        </tr>
                        <tr>
                            <td>74</td>
                            <td>3.71</td>
                        </tr>
                        <tr>
                            <td>75</td>
                            <td>3.45</td>
                        </tr>
                        <tr>
                            <td>76</td>
                            <td>3.2</td>
                        </tr>
                        <tr>
                            <td>77</td>
                            <td>2.96</td>
                        </tr>
                        <tr>
                            <td>78</td>
                            <td>2.73</td>
                        </tr>
                        <tr>
                            <td>79</td>
                            <td>2.51</td>
                        </tr>
                        <tr>
                            <td>80</td>
                            <td>2.3</td>
                        </tr>
                        <tr>
                            <td>81</td>
                            <td>2.1</td>
                        </tr>
                        <tr>
                            <td>82</td>
                            <td>1.91</td>
                        </tr>
                        <tr>
                            <td>83</td>
                            <td>1.73</td>
                        </tr>
                        <tr>
                            <td>84</td>
                            <td>1.56</td>
                        </tr>
                        <tr>
                            <td>85</td>
                            <td>1.4</td>
                        </tr>
                        <tr>
                            <td>86</td>
                            <td>1.25</td>
                        </tr>
                        <tr>
                            <td>87</td>
                            <td>1.11</td>
                        </tr>
                        <tr>
                            <td>88</td>
                            <td>0.98</td>
                        </tr>
                        <tr>
                            <td>89</td>
                            <td>0.86</td>
                        </tr>
                        <tr>
                            <td>90</td>
                            <td>0.75</td>
                        </tr>
                        <tr>
                            <td>91</td>
                            <td>0.65</td>
                        </tr>
                        <tr>
                            <td>92</td>
                            <td>0.56</td>
                        </tr>
                        <tr>
                            <td>93</td>
                            <td>0.47</td>
                        </tr>
                        <tr>
                            <td>94</td>
                            <td>0.39</td>
                        </tr>
                        <tr>
                            <td>95</td>
                            <td>0.31</td>
                        </tr>
                        <tr>
                            <td>96</td>
                            <td>0.24</td>
                        </tr>
                        <tr>
                            <td>97</td>
                            <td>0.17</td>
                        </tr>
                        <tr>
                            <td>98</td>
                            <td>0.11</td>
                        </tr>
                        <tr>
                            <td>99</td>
                            <td>0.05</td>
                        </tr>
                        <tr>
                            <td>100</td>
                            <td>0.00</td>
                        </tr>
                    </tbody>
                </table>
                <br>
                <br>
                <img src="https://image.space.rakuten.co.jp/d/strg/ctrl/9/17d086de69db98061727164ce6d555745cb6c3a2.10.9.9.3.png"
                    width="800px" border=0 name="insertImg" /><br><br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <!-- 重いのでやめた。 -->
                <!-- <h2>段階ごとの成功確率グラフ（%）</h2>
                    <p class="small">成功確率（%）を段階1〜100の棒グラフで視覚化しています。</p> -->
                <!-- Chart.js 読み込み -->
                <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->

                <!-- キャンバス -->
                <!-- <canvas id="probChart" width="480" height="200"></canvas> -->


            </div>
            <!-- <script>
                // ▼ 段階と成功確率（%）
                const Levels = [...Array(100)].map((_, i) => i + 1);
                const ProbPercent = [
                    97.05, 94.1, 91.2, 88.4, 85.65, 82.95, 80.3, 77.7, 75.15, 72.65,
                    70.2, 67.8, 65.45, 63.15, 60.9, 58.7, 56.55, 54.45, 52.4, 50.4,
                    48.45, 46.55, 44.7, 42.9, 41.15, 39.45, 37.8, 36.2, 34.65, 33.15,
                    31.7, 30.3, 28.95, 27.65, 26.4, 25.2, 24.05, 22.95, 21.9, 20.9,
                    19.95, 19.05, 18.2, 17.4, 16.65, 15.95, 15.3, 14.7, 14.15, 13.65,
                    13.15, 12.65, 12.15, 11.65, 11.15, 10.66, 10.18, 9.71, 9.25, 8.8,
                    8.36, 7.93, 7.51, 7.1, 6.7, 6.31, 5.93, 5.56, 5.2, 4.85,
                    4.55, 4.26, 3.98, 3.71, 3.45, 3.2, 2.96, 2.73, 2.51, 2.3,
                    2.1, 1.91, 1.73, 1.56, 1.4, 1.25, 1.11, 0.98, 0.86, 0.75,
                    0.65, 0.56, 0.47, 0.39, 0.31, 0.24, 0.17, 0.11, 0.05, 0
                ];

                // ▼ Chart.js 描画処理
                const ctx = document.getElementById('probChart').getContext('2d');

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: Levels,
                        datasets: [{
                            label: '成功確率 (%)',
                            data: ProbPercent,
                            borderWidth: 1,
                            backgroundColor: 'rgba(54, 162, 235, 0.6)',
                            borderColor: 'rgba(54, 162, 235, 1)'
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            x: {
                                title: { display: true, text: '段階（1〜100）' },
                                ticks: { maxRotation: 0, minRotation: 0 }
                            },
                            y: {
                                beginAtZero: true,
                                title: { display: true, text: '%（成功確率）' }
                            }
                        }
                    }
                });
            </script> -->
            <script type="text/javascript" src="./js2023/ancient_dragon_enfoce.js"></script>
            <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
        </div></div>
</body>

</html>