# 新規マップが登場したら

* 以下優先順番で対応するといいかも。
* htmlとjsが読めるのは前提で、ソース読んで理解するのが面倒な人向け。
* 要は備忘録

## この辺は対応しないとね
- `該当フィールドの画像`
  - `Data\Scenario\Red Stone\Map`に.tgaがある
  - 秘密ダンジョンはさらにその下の`expansion`フォルダだよ
  - `map\design`以下に並べておく
  - .tgaを.png変換するのはXnConvert辺りがおすすめ。
  - 秘密ダンジョンも画像も忘れずに
  - 出てこないマップはそもそも取り出しちゃダメな可能性があるので、やめとけ？
- `mapdata.js`
  - プロパティで出てくる画像サイズをh * wの形式でメモ
  - マップ情報はゲームから取ってくる(IMG_SIZE)
  - (NAME_LIST)は基本情報。
  - `1009: { name: "ヤティカヌ星降る森林", img: "[1009]YatikanuForest_3.rmd.png", black: "[880]ForestOfLife_OutSkirts.rmd.png", lvmin: 1350, lvmax: 1400 },`
  - ID形式じゃないものは自分で被らなさそうな所に採番しよう。9000付近とかおすすめ。
  - IMG_SYS_SIZEは入力しなくてもOK。システム上のサイズなので、今は使わない。
- `mapdata_sub.js`
  - 連動や低下情報などサブ情報をメモするところ
  - ヤティカヌとかでさらに特殊低下がある場合はmapdata_extraで。
  - 基本的には順番に入力するだけ、忘れると該当マップでエラー出て古都が出てくる
- `common.js`
  - 初期描画とかで使う
- `index_create.js`
- `calc.js`
  - マップサイズの計算・初期描画とかに使う
  - 難読コードだったらすまん。
- ``
## 以下は仕様変更あったら対応しといて。
- `モンスター情報`
  - これ専用エディタ作らないとまず無理っす
  - シーフか天使でmob位置探知しながらやるとか？
- `モンスターのステータス`
  - 知らん。まずはmob一覧作れ。
- `npcdata.js`
   - npcの所在地を表示するのに。




# 2021/8～の対応手順
## 通常マップの場合
- tgaファイルを作る
- 画像サイズをimgsize.jsに入力しておく
- 白黒を作る
- mapdataのNameListを入れる
- `    1016: { name: "寂しい群島", img: "[1016]LonelyIsland.rmd.png", black: "[875]D01.rmd.png", lvmin: 1200, lvmax: 1250 },`
  - 適正レベルはmobレベルにあわせておく
  - imgは白黒側のミスに注意。（なくても動きます）
- NpcListは廃止します
- MobListにデータ入れる
  - 出力されたものをコピペするだけ
- mapdata_subに低下情報いれる
- 特殊マップならmapdata_extraに情報を入れる（秘密Dのリンクなど）
- mobdbを作る
  - 出力された内容を`Mobとエリア両方`コピペ
- 連動も調べておく
- map2.csvも可能なら？（ドロップアイテム用）
  - 忘れてもしゃーなし

## ミラーマップの場合
- 元となるマップを調べる
- 低下情報などはコピペで大丈夫。
- 連動が違うケースあるので注意
- mobdbもコピペで大丈夫だが、index番号だけは変えるように。
- map2.csvも番号だけ変えれば大丈夫。
